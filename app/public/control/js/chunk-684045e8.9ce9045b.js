(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-684045e8"],{"167a":function(e,t,n){},"9ca9":function(e,t,n){"use strict";var r=n("167a"),a=n.n(r);a.a},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,c=Function.prototype,i=c.toString,o=/^\s*function ([^ (]*)/,s="name";r&&!(s in c)&&a(c,s,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(e){return""}}})},e75a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-subheader",[e._v("首页轮播")]),n("v-card",{staticClass:"px-6"},[n("v-toolbar",{attrs:{flat:""}},[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!0}}},[e._v("+添加")]),n("v-btn",{attrs:{text:""}},[e._v("更新")])],1),n("v-data-table",{attrs:{align:"center",headers:e.headers,"disable-sort":"",items:e.items},scopedSlots:e._u([{key:"item.cid",fn:function(t){var n=t.item;return[e._v(e._s(e.columnByCid[n.cid].name))]}},{key:"item.oper",fn:function(t){var r=t.item;return[n("v-btn",{staticClass:"mx-1",attrs:{fab:"","x-small":"",depressed:"",title:"删除"},on:{click:function(t){return e.bannerDelete(r.id)}}},[n("v-icon",[e._v("iconfont iconfont-customerarchivesrecycleBin")])],1),n("v-btn",{staticClass:"mx-1",attrs:{fab:"","x-small":"",depressed:"",title:"修改"},on:{click:function(t){return e.editBanner(r.id)}}},[n("v-icon",[e._v("iconfont iconfont-basepermissionapproveApply")])],1)]}}])})],1),n("v-dialog",{staticClass:"v-dialog",attrs:{persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.dialog?n("v-row",{attrs:{justify:"center"}},[n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"6"}},[n("v-card",{staticClass:"pa-5"},[n("v-card-title",{staticClass:"justify-center text-uppercase text-h5"},[e._v(e._s("add"==e.dialogType?"添加":"更新")+"banner")]),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"标题"},model:{value:e.bannerModel.title,callback:function(t){e.$set(e.bannerModel,"title",t)},expression:"bannerModel.title"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{label:"所属分类",items:e.columns,"item-text":"name","item-value":"id"},model:{value:e.bannerModel.cid,callback:function(t){e.$set(e.bannerModel,"cid",t)},expression:"bannerModel.cid"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"跳转网址"},model:{value:e.bannerModel.url,callback:function(t){e.$set(e.bannerModel,"url",t)},expression:"bannerModel.url"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"排序"},model:{value:e.bannerModel.order,callback:function(t){e.$set(e.bannerModel,"order",t)},expression:"bannerModel.order"}})],1),n("upload",{attrs:{type:"auto",src:e.bannerModel.pic,cols:"6"},model:{value:e.imgFile,callback:function(t){e.imgFile=t},expression:"imgFile"}})],1)],1),n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{staticClass:"mx-2",attrs:{width:"120"},on:{click:function(t){return e.submit(e.dialogType)}}},[e._v(e._s("add"==e.dialogType?"提交":"更新BANNER"))]),n("v-btn",{staticClass:"mx-2",attrs:{width:"120"},on:{click:function(t){return e.bannerModelReset(1)}}},[e._v("关闭")])],1)],1)],1)],1):e._e()],1)],1)},a=[],c=(n("4160"),n("b0c0"),n("d3b7"),n("159b"),n("96cf"),n("1da1")),i=n("1a72"),o={name:"banner",data:function(){return{headers:[{text:"ID",value:"id"},{text:"所属栏目",value:"cid"},{text:"排序",value:"order"},{text:"发布时间",value:"date"},{text:"操作",value:"oper"}],items:[],dialog:!1,dialogType:"add",bannerModel:{title:"",pic:"",order:"",url:"",cid:""},columns:[],imgFile:{}}},methods:{bannerModelReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;t.bannerModel={title:"",pic:"",order:"",url:"",cid:""},t.dialogType="add",t.imgFile={},t.dialog=!1,e||t.bannerQueryAll()},submit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t,"add"===e){n.next=3;break}return n.abrupt("return",r.bannerUpdate());case 3:if(!r.$u.checkObjectIsEmpty(r.imgFile)){n.next=5;break}return n.abrupt("return",r.$hint({msg:"请选择上传的图片",type:"error"}));case 5:return n.next=7,i["I"](r.imgFile,r);case 7:if(a=n.sent,200===a.code){n.next=10;break}return n.abrupt("return",r.$hint({msg:"上传图片失败",type:"error"}));case 10:return r.bannerModel.pic=a.data,r.bannerModel.date=(new Date).valueOf(),n.prev=12,n.next=15,i["e"](r.bannerModel,r);case 15:c=n.sent,console.log(c),r.$hint({msg:"添加成功"}),r.bannerModelReset(),n.next=24;break;case 21:n.prev=21,n.t0=n["catch"](12),console.log(n.t0);case 24:case"end":return n.stop()}}),n,null,[[12,21]])})))()},editBanner:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t,n.next=3,r.bannerRead(e);case 3:if(r.bannerModel=n.sent,r.bannerModel){n.next=6;break}return n.abrupt("return",r.bannerModelReset(1));case 6:r.dialogType="edit",r.dialog=!0;case 8:case"end":return n.stop()}}),n)})))()},bannerRead:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t,n.prev=1,n.next=4,i["h"]({id:e});case 4:return r=n.sent,n.abrupt("return",r.data);case 8:return n.prev=8,n.t0=n["catch"](1),console.log(n.t0),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},bannerUpdate:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e,n.$u.checkObjectIsEmpty(n.imgFile)){t.next=8;break}return t.next=4,i["I"](n.imgFile,n,n.bannerModel.pic);case 4:if(r=t.sent,n.bannerModel.pic=r?r.data:n.bannerModel.pic,r){t.next=8;break}return t.abrupt("return",n.$hint({msg:"上传图片失败",type:"error"}));case 8:return n.bannerModel.date=(new Date).valueOf(),t.prev=9,t.next=12,i["i"](n.bannerModel);case 12:t.sent,n.$hint({msg:"更新成功"}),n.bannerModelReset(),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](9),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[9,17]])})))()},bannerQueryAll:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.prev=1,t.next=4,i["g"]();case 4:r=t.sent,n.items=200===r.code?r.data:[],n.items.length>0&&n.items.forEach((function(e,t){e.origin=n.$u.xz[e.origin].name})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},bannerDelete:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t,r.$toast({msg:"确认删除吗？"}),r.bus.$on("toastConfirm",Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(r.bannerModel.pic.length>0)){t.next=10;break}return t.prev=1,t.next=4,i["l"]({path:r.bannerModel.pic});case 4:t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.error(t.t0);case 10:return t.prev=10,t.next=13,i["f"]({id:e});case 13:if(n=t.sent,200!==n.code){t.next=17;break}return t.abrupt("return",r.$hint({msg:"删除成功"}));case 17:r.$hint({msg:"删除失败"}),t.next=24;break;case 20:t.prev=20,t.t1=t["catch"](10),console.error(t.t1),r.$hint({msg:"删除失败"});case 24:case"end":return t.stop()}}),t,null,[[1,7],[10,20]])}))));case 3:case"end":return n.stop()}}),n)})))()},columnQueryAll:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.prev=1,t.next=4,i["j"]({},n);case 4:r=t.sent,n.columns=200===r.code?r.data:[],t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e,n.columnQueryAll(),n.bannerQueryAll();case 3:case"end":return t.stop()}}),t)})))()},components:{upload:function(){return Promise.all([n.e("chunk-5a425e44"),n.e("chunk-2c9e7ee5")]).then(n.bind(null,"9dac"))}},computed:{columnByCid:function(){var e=this,t={};return e.columns.forEach((function(e,n){t[e.id]=e})),t}}},s=o,l=(n("9ca9"),n("2877")),u=n("6544"),d=n.n(u),b=n("8336"),p=n("b0af"),v=n("99d9"),m=n("62ad"),f=n("a523"),h=n("8fea"),g=n("169a"),x=n("132d"),k=n("0fd9"),w=n("b974"),M=n("e0c7"),y=n("8654"),R=n("71d9"),C=Object(l["a"])(s,r,a,!1,null,null,null);t["default"]=C.exports;d()(C,{VBtn:b["a"],VCard:p["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:m["a"],VContainer:f["a"],VDataTable:h["a"],VDialog:g["a"],VIcon:x["a"],VRow:k["a"],VSelect:w["a"],VSubheader:M["a"],VTextField:y["a"],VToolbar:R["a"]})}}]);