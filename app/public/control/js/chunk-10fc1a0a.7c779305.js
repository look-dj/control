(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10fc1a0a"],{1681:function(e,t,a){},a844:function(e,t,a){"use strict";a("1681");var r=a("8654"),n=a("58df");const o=Object(n["a"])(r["a"]);t["a"]=o.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...r["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(a,t)+"px"},genInput(){const e=r["a"].options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){r["a"].options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},ce49:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fiuld:""}},[a("v-subheader",[e._v(" 栏目管理 "),a("v-icon",{staticClass:"mx-1",attrs:{small:""}},[e._v("iconfont-xiangyou")]),e._v("势力划分 ")],1),a("v-card",{staticClass:"px-6"},[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!0}}},[e._v("+添加新势力")]),a("v-spacer"),a("v-btn",{attrs:{text:""}},[e._v("搜索")])],1),a("v-data-table",{attrs:{"disable-sort":"",items:e.items,headers:e.headers},scopedSlots:e._u([{key:"item.oper",fn:function(t){var r=t.item;return[a("v-btn",{staticClass:"mx-1",attrs:{fab:"","x-small":"",depressed:"",title:"删除"},on:{click:function(t){return e.deleteProduct(r.id)}}},[a("v-icon",[e._v("iconfont iconfont-customerarchivesrecycleBin")])],1),a("v-btn",{staticClass:"mx-1",attrs:{fab:"","x-small":"",depressed:"",title:"修改"},on:{click:function(t){return e.editProduct(r.id)}}},[a("v-icon",[e._v("iconfont iconfont-basepermissionapproveApply")])],1)]}}])})],1),a("v-dialog",{attrs:{fullscreen:"",persistent:"","hide-overlay":""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.dialog?a("v-card",{staticClass:"d-flex align-center flex-column"},[a("v-card-title",{staticClass:"justify-center text-h5"},[e._v("添加新势力")]),a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-card-text",[a("v-row",[a("upload",{attrs:{type:"line",cols:"12",src:e.productModel.pic},model:{value:e.imgFile,callback:function(t){e.imgFile=t},expression:"imgFile"}}),a("v-col",{staticClass:"px-10",attrs:{cols:"6",height:"100"}},[a("v-text-field",{attrs:{label:"势力名称"},model:{value:e.productModel.name,callback:function(t){e.$set(e.productModel,"name",t)},expression:"productModel.name"}}),a("v-text-field",{attrs:{label:"年代"},model:{value:e.productModel.years,callback:function(t){e.$set(e.productModel,"years",t)},expression:"productModel.years"}})],1),a("v-col",{staticClass:"px-10",attrs:{cols:"6",height:"100"}},[a("v-text-field",{attrs:{label:"统治者"},model:{value:e.productModel.lead,callback:function(t){e.$set(e.productModel,"lead",t)},expression:"productModel.lead"}}),a("v-select",{attrs:{label:"当前状态",items:["兴盛","羸弱"]},model:{value:e.productModel.state,callback:function(t){e.$set(e.productModel,"state",t)},expression:"productModel.state"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"大致介绍",solo:"","auto-grow":""},model:{value:e.productModel.introduce,callback:function(t){e.$set(e.productModel,"introduce",t)},expression:"productModel.introduce"}})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-3",attrs:{width:"100"},on:{click:function(t){return e.submit(e.dialogType)}}},[e._v("提交")]),a("v-btn",{staticClass:"mx-3",attrs:{width:"100"},on:{click:function(t){return e.productModelReset()}}},[e._v("关闭")])],1)],1):e._e()],1)],1)},n=[],o=(a("d3b7"),a("96cf"),a("1da1")),s=a("1a72"),c={name:"tpProduct",data:function(){return{headers:[{text:"ID",value:"id",align:"center"},{text:"名称",value:"name",align:"center"},{text:"状态",value:"state",align:"center"},{text:"统治者",value:"lead",align:"center"},{text:"年代",value:"years",align:"center"},{text:"操作",value:"oper",align:"center"}],items:[],productModel:{name:"",state:"",introduce:"",years:"",lead:"",pic:""},dialog:!1,imgFile:{},dialogType:"add"}},mounted:function(){var e=this;e.queryProducts()},methods:{productModelReset:function(){var e=this;e.productModel={name:"",state:"",introduce:"",years:"",lead:""},e.dialog=!1,e.dialogType="add",e.queryProducts()},queryProducts:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.prev=1,t.next=4,s["o"]({num:0});case 4:r=t.sent,a.items=200===r.code?r.data:[],t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},submit:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,"add"===a.dialogType){e.next=3;break}return e.abrupt("return",a.updateProduct());case 3:if(console.log(a.imgFile),!a.$u.checkObjectIsEmpty(a.imgFile)){e.next=6;break}return e.abrupt("return",a.$hint({msg:"请选择上传的图片",type:"error"}));case 6:return a.productModel.start=(new Date).valueOf(),e.prev=7,e.next=10,s["B"](a.imgFile);case 10:if(r=e.sent,a.productModel.pic=r||"",r){e.next=14;break}return e.abrupt("return",a.$hint({msg:"上传图片失败",type:"error"}));case 14:return e.next=16,s["e"](a.productModel);case 16:n=e.sent,a.$hint({msg:n.msg}),a.productModelReset(),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](7),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[7,21]])})))()},updateProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.$u.checkObjectIsEmpty(a.imgFile)){t.next=8;break}return t.next=4,s["B"](a.imgFile,a,a.productModel.pic);case 4:if(r=t.sent,a.productModel.pic=r||"",r){t.next=8;break}return t.abrupt("return",a.$hint({msg:"上传图片失败",type:"error"}));case 8:return a.productModel.update=(new Date).valueOf(),t.prev=9,t.next=12,s["z"](a.productModel);case 12:t.sent,a.productModelReset(),a.$hint({msg:"更新成功"}),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](9),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[9,17]])})))()},readProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t,a.prev=1,a.next=4,s["t"]({id:e});case 4:return r=a.sent,a.abrupt("return",r.data);case 8:return a.prev=8,a.t0=a["catch"](1),console.log(a.t0),a.abrupt("return",!1);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},editProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,a.next=3,r.readProduct(e);case 3:n=a.sent,n&&(r.productModel=n,r.dialogType="edit",r.dialog=!0);case 5:case"end":return a.stop()}}),a)})))()},deleteProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t,r.$toast({msg:"确定要删除这方势力吗？"}),r.bus.$on("toastConfirm",Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.readProduct(e);case 2:if(a=t.sent,!a.pic){t.next=7;break}return t.next=6,s["i"]({path:a.pic});case 6:t.sent;case 7:return t.prev=7,t.next=10,s["j"]({id:e});case 10:t.sent,r.$hint({msg:"删除成功"}),r.queryProducts(),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](7),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[7,15]])}))));case 3:case"end":return a.stop()}}),a)})))()}},components:{upload:function(){return a.e("chunk-7944af12").then(a.bind(null,"9dac"))}}},i=c,u=a("2877"),l=a("6544"),d=a.n(l),p=a("8336"),v=a("b0af"),h=a("99d9"),m=a("62ad"),f=a("a523"),g=a("8fea"),x=a("169a"),b=a("132d"),w=a("0fd9"),k=a("b974"),y=a("2fa4"),M=a("e0c7"),R=a("8654"),$=a("a844"),C=a("71d9"),V=Object(u["a"])(i,r,n,!1,null,null,null);t["default"]=V.exports;d()(V,{VBtn:p["a"],VCard:v["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:m["a"],VContainer:f["a"],VDataTable:g["a"],VDialog:x["a"],VIcon:b["a"],VRow:w["a"],VSelect:k["a"],VSpacer:y["a"],VSubheader:M["a"],VTextField:R["a"],VTextarea:$["a"],VToolbar:C["a"]})}}]);