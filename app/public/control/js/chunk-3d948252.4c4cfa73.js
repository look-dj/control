(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d948252"],{1681:function(e,t,a){},a844:function(e,t,a){"use strict";a("1681");var n=a("8654"),r=a("58df");const s=Object(r["a"])(n["a"]);t["a"]=s.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...n["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(a,t)+"px"},genInput(){const e=n["a"].options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){n["a"].options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},ec16:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"v-container",attrs:{fiuld:""}},[a("v-subheader",[e._v(" 栏目管理 "),a("v-icon",{staticClass:"mx-1",attrs:{small:""}},[e._v("iconfont-xiangyou")]),e._v("角色管理 ")],1),a("v-card",{staticClass:"px-6"},[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!0}}},[e._v("+添加新角色")]),a("v-btn",{attrs:{text:""}},[a("v-icon",{attrs:{small:""}},[e._v("iconfont-shanchu")]),e._v("删除选中 ")],1),a("v-spacer"),a("v-btn",{attrs:{text:""}},[a("v-icon",{staticClass:"mr-2"},[e._v("iconfont-sousuo")]),e._v("搜索 ")],1)],1),a("v-data-table",{attrs:{"disable-sort":"",items:e.items,headers:e.headers,"show-select":""},scopedSlots:e._u([{key:"item.start",fn:function(t){var a=t.item;return[e._v(e._s(e.$u.format.call(new Date(Number(a.update?a.update:a.start)),"yyyy-MM-dd")))]}},{key:"item.oper",fn:function(t){var n=t.item;return[a("v-btn",{staticClass:"mx-1",attrs:{fab:"","x-small":"",depressed:"",title:"删除"},on:{click:function(t){return e.deleteCase(n.id)}}},[a("v-icon",[e._v("iconfont iconfont-customerarchivesrecycleBin")])],1),a("v-btn",{staticClass:"mx-1",attrs:{fab:"","x-small":"",depressed:"",title:"修改"},on:{click:function(t){return e.editCase(n.id)}}},[a("v-icon",[e._v("iconfont iconfont-basepermissionapproveApply")])],1)]}}])})],1),a("v-dialog",{attrs:{fullscreen:"",persistent:"","hide-overlay":""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.dialog?a("v-card",{staticClass:"d-flex align-center flex-column"},[a("v-card-title",{staticClass:"justify-center text-h5"},[e._v(e._s("add"===e.dialogType?"添加":"编辑")+"角色")]),a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-card-text",[a("v-row",[a("upload",{attrs:{type:"card",cols:"3",src:e.caseModel.avatar},model:{value:e.imgFile,callback:function(t){e.imgFile=t},expression:"imgFile"}}),a("v-col",{staticClass:"px-10",attrs:{cols:"4",height:"100"}},[a("v-text-field",{attrs:{label:"角色名称"},model:{value:e.caseModel.name,callback:function(t){e.$set(e.caseModel,"name",t)},expression:"caseModel.name"}}),a("v-select",{attrs:{label:"角色性别",items:["男","女"]},model:{value:e.caseModel.sex,callback:function(t){e.$set(e.caseModel,"sex",t)},expression:"caseModel.sex"}})],1),a("v-col",{staticClass:"px-10",attrs:{cols:"5",height:"100"}},[a("v-text-field",{attrs:{label:"角色境界"},model:{value:e.caseModel.realm,callback:function(t){e.$set(e.caseModel,"realm",t)},expression:"caseModel.realm"}}),a("v-select",{attrs:{label:"势力划分",items:["北凉","江南"]},model:{value:e.caseModel.place,callback:function(t){e.$set(e.caseModel,"place",t)},expression:"caseModel.place"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"人物描述",solo:"","auto-grow":""},model:{value:e.caseModel.introduce,callback:function(t){e.$set(e.caseModel,"introduce",t)},expression:"caseModel.introduce"}})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"mx-3",attrs:{width:"100"},on:{click:function(t){return e.submit(e.dialogType)}}},[e._v(e._s("add"===e.dialog?"提交":"确认修改"))]),a("v-btn",{staticClass:"mx-3",attrs:{width:"100"},on:{click:function(t){return e.caseModelReset()}}},[e._v("关闭")])],1)],1):e._e()],1)],1)},r=[],s=(a("d3b7"),a("96cf"),a("1da1")),c=a("1a72"),o={name:"tpCase",data:function(){return{dialog:!1,dialogType:"add",headers:[{text:"ID",value:"id",align:"center"},{text:"名称",value:"name",align:"center"},{text:"性别",value:"sex",align:"center"},{text:"境界",value:"step",align:"center"},{text:"分类",value:"class",align:"center"},{text:"发布日期",value:"date",align:"center"},{text:"操作",value:"oper",align:"center"}],items:[],caseModel:{avatar:"",name:"",introduce:"",sex:"",place:"",realm:""},imgFile:{}}},mounted:function(){var e=this;e.queryCases()},methods:{caseModelReset:function(){var e=this;e.caseModel={avatar:"",name:"",introduce:"",sex:"",place:"",realm:""},e.dialogType="add",e.dialog=!1,e.queryCases()},queryCases:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.prev=1,t.next=4,c["m"]({num:0});case 4:n=t.sent,a.items=200===n.code?n.data:[],console.log(n),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},submit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t,"edit"!==e){a.next=3;break}return a.abrupt("return",n.updateCase());case 3:if(!n.$u.checkObjectIsEmpty(n.imgFile)){a.next=5;break}return a.abrupt("return",n.$hint({msg:"请选择上传的图片",type:"error"}));case 5:return n.caseModel.start=(new Date).valueOf(),n.caseModel.avatar="ceshi",a.prev=7,a.next=10,c["B"](n.imgFile);case 10:if(r=a.sent,n.caseModel.avatar=r||"",r){a.next=14;break}return a.abrupt("return",n.$hint({msg:"上传图片失败",type:"error"}));case 14:return a.next=16,c["b"](n.caseModel);case 16:a.sent,n.$hint({msg:"添加成功"}),n.caseModelReset(),a.next=24;break;case 21:a.prev=21,a.t0=a["catch"](7),console.log(a.t0);case 24:case"end":return a.stop()}}),a,null,[[7,21]])})))()},updateCase:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.$u.checkObjectIsEmpty(a.imgFile)){t.next=8;break}return t.next=4,c["B"](a.imgFile,a,a.caseModel.avatar);case 4:if(n=t.sent,a.caseModel.avatar=n||"",n){t.next=8;break}return t.abrupt("return",a.$hint({msg:"上传图片失败",type:"error"}));case 8:return t.prev=8,a.caseModel.update=(new Date).valueOf(),t.next=12,c["w"](a.caseModel,a);case 12:t.sent,a.$hint({msg:"修改成功"}),a.caseModelReset(),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](8),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[8,17]])})))()},readCase:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.prev=1,a.next=4,c["q"]({id:e},n);case 4:return r=a.sent,a.abrupt("return",r.data);case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()},editCase:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.next=3,n.readCase(e);case 3:n.caseModel=a.sent,n.dialogType="edit",n.dialog=!0;case 6:case"end":return a.stop()}}),a)})))()},deleteCase:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t,n.$toast({msg:"确认要删除这位角色吗？"}),n.bus.$on("toastConfirm",Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.readCase(e);case 2:if(a=t.sent,!a.avatar){t.next=7;break}return t.next=6,c["i"]({path:a.avatar});case 6:t.sent;case 7:return t.prev=7,t.next=10,c["g"]({id:e},n);case 10:t.sent,n.$hint({msg:"成功删除一条数据"}),n.queryCases(),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](7),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[7,15]])}))));case 3:case"end":return a.stop()}}),a)})))()}},components:{upload:function(){return a.e("chunk-7944af12").then(a.bind(null,"9dac"))}}},i=o,l=a("2877"),u=a("6544"),d=a.n(u),p=a("8336"),v=a("b0af"),m=a("99d9"),h=a("62ad"),f=a("a523"),g=a("8fea"),x=a("169a"),b=a("132d"),w=a("0fd9"),k=a("b974"),y=a("2fa4"),C=a("e0c7"),M=a("8654"),R=a("a844"),$=a("71d9"),_=Object(l["a"])(i,n,r,!1,null,"62598874",null);t["default"]=_.exports;d()(_,{VBtn:p["a"],VCard:v["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:h["a"],VContainer:f["a"],VDataTable:g["a"],VDialog:x["a"],VIcon:b["a"],VRow:w["a"],VSelect:k["a"],VSpacer:y["a"],VSubheader:C["a"],VTextField:M["a"],VTextarea:R["a"],VToolbar:$["a"]})}}]);